<!doctype html> <html> <head> <title>Marble Game</title> <style> /* (Your CSS styles here) */ </style> </head> <body> <h1>Marble Game</h1> <p style="color: #000; text-align: left;">Whoever gets the last marble/marbles wins! Player 1 to start.</p> <div class="separator"></div> <div id="jar-container"> <div> <p>There are <span id="jar" style="color: #FFA500;">10</span> marbles in the jar:</p> <img src="jar-10.jpg" alt="Jar with marbles" id="jar-image"> </div> <button id="restart-btn">Restart</button> </div> <div class="separator"></div> <p id="message"></p> <div class="player-section"> <div class="player-box" id="player1-box"> <h2>Player 1</h2> <button type="button" id="player1-btn1" data-pick="1">Pick 1</button> <button type="button" id="player1-btn2" data-pick="2">Pick 2</button> </div> <div class="player-box" id="player2-box"> <h2>Player 2</h2> <button type="button" id="player2-btn1" data-pick="1">Pick 1</button> <button type="button" id="player2-btn2" data-pick="2">Pick 2</button> </div> </div> <!-- Include the Socket.IO client library --> <script src="/socket.io/socket.io.js"></script> <script> // Connect to the websocket server const socket = io(); let currentPlayer = 1; let myPlayerNumber = parseInt(prompt("Enter your player number (1 or 2):"), 10); if (![1, 2].includes(myPlayerNumber)) { alert("Invalid input. Defaulting to Player 1."); myPlayerNumber = 1; } const messageEl = document.getElementById("message"); const jarEl = document.getElementById("jar"); const jarImageEl = document.getElementById("jar-image"); const restartBtn = document.getElementById("restart-btn"); const player1Btns = document.querySelectorAll("#player1-box button"); const player2Btns = document.querySelectorAll("#player2-box button"); // Attach event listeners for marble-picking buttons function addListeners(buttons, playerNum) { buttons.forEach(btn => { btn.addEventListener("click", () => { const numMarbles = parseInt(btn.getAttribute("data-pick"), 10); if (playerNum !== currentPlayer) { alert("Not your turn!"); return; } socket.emit('pickMarbles', { player: playerNum, numMarbles }); }); }); } addListeners(player1Btns, 1); addListeners(player2Btns, 2); // Restart button sends a restart event restartBtn.addEventListener("click", () => { socket.emit('restartGame'); }); // Listen for game state updates from the server socket.on("stateUpdate", (data) => { jarEl.textContent = data.jar; jarImageEl.src = `jar-${data.jar}.jpg`; messageEl.textContent = data.message; currentPlayer = data.currentPlayer; updateButtonStatus(); }); // Listen for error messages socket.on("errorMessage", (data) => { alert(data.message); }); // Enable/disable buttons based on whose turn it is function updateButtonStatus() { if (myPlayerNumber === currentPlayer) { if (myPlayerNumber === 1) { player1Btns.forEach(btn => btn.disabled = false); player2Btns.forEach(btn => btn.disabled = true); } else { player2Btns.forEach(btn => btn.disabled = false); player1Btns.forEach(btn => btn.disabled = true); } } else { player1Btns.forEach(btn => btn.disabled = true); player2Btns.forEach(btn => btn.disabled = true); } } </script> </body> </html>